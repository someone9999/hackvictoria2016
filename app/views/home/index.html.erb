<script>
    var racks = <%= raw @racksJson %>

    createMap().then(function() {
        return addSelfPosition({
            shape: {
                type: "circle",
                coords: [10, 10, 10]
            },
            icon: {
                url: "/assets/dot.png",
                anchor: {x: 10, y: 10}
            },
            label: ''
        });
    }).then(function() {
        return addRacks(racks);
    }).then(function() {
        makeRealTime();
        return null;
    })
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKoHy8kXXlkzOM0nZOeW-X-L1QqUa-k3Q&callback=onGoogleMapsApiLoad"
    async defer></script>
